<!DOCTYPE html><html><head><link href="META-INF/resources/webjars/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" /><link href="styles.css" rel="stylesheet" /><link rel="shortcut icon" type="image/png" href="favicon.png" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style>
.scalatex-site-Styles-headerLink{
  color: #777;
  opacity: 0.05;
  text-decoration: none;
}


.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink{
  color: #777;
  opacity: 0.5;
  text-decoration: none;
}
.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink:hover{
  opacity: 1.0;
}
.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink:active{
  opacity: 0.75;
}

.scalatex-site-Styles-content{
  color: #777;
  line-height: 1.6em;
  margin: 0 auto;
  margin-left: auto;
  margin-right: auto;
  max-width: 800px;
  padding: 0 1em;
  padding-bottom: 50px;
}
.scalatex-site-Styles-content *{
  position: relative;
}
.scalatex-site-Styles-content p{
  text-align: justify;
}
.scalatex-site-Styles-content a:link{
  color: #37a;
  text-decoration: none;
}
.scalatex-site-Styles-content a:visited{
  color: #949;
  text-decoration: none;
}
.scalatex-site-Styles-content a:hover{
  text-decoration: underline;
}
.scalatex-site-Styles-content a:active{
  color: #000;
  text-decoration: underline;
}
.scalatex-site-Styles-content code{
  color: #000;
}

/*Workaround for bug in highlight.js IDEA theme*/
span.hljs-tag, span.hljs-symbol{
    background: none;
}
    </style><title>Chimney</title><script src="scripts.js"></script></head><body><div>

<a href="https://github.com/scalalandio/chimney" style="position: absolute;top: 0px;right: 0px;border: 0;"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub" /></a>

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Chimney" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Chimney<a class=" scalatex-site-Styles-headerLink" href="#Chimney" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /><h2 style="font-weight: 300;color: #ccc;padding: 0px;margin-top: 0px;">Scala library for boilerplate-free data transformations</h2></div><div class=" scalatex-site-Styles-content">
  <div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="WhatChimneydoes" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">What Chimney does<a class=" scalatex-site-Styles-headerLink" href="#WhatChimneydoes" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
    <p>
      In strongly-typed language programmer's daily life sometimes happens
      to transform an object of one type to another object which contains
      number of the same or similar fields in their definitions.</p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">case class MakeCoffee(id: Int, kind: String, addict: String)
case class CoffeeMade(id: Int, kind: String, forAddict: String, at: ZonedDateTime)</code></pre>
    <p>
      Usual approach is to just rewrite fields one by one</p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">val command = MakeCoffee(id = Random.nextInt,
                         kind = &quot;Espresso&quot;,
                         addict = &quot;Piotr&quot;)
val event = CoffeeMade(id = command.id,
                       kind = command.kind,
                       forAddict = command.addict,
                       at = ZonedDateTime.now)</code></pre>
    <p>
      While the example stays lean, in real-life code we usually end up with tons
      of such boilerplate, especially when:
      <ul>
        <li>
          we maintain typed schema and want to migrate between multiple schema
          versions</li>
        <li>
          we apply practices like DDD (Domain-Driven-Design) where suggested
          approach is to separate model schemas of different bounded contexts</li>
        <li>
          we use code-generation tools like Protocol Buffers that generate primitive
          types like <code class="scala scalatex-site-Styles-highlightMe" style="display: inline;padding: 0px;margin: 0px;">Int</code> or <code class="scala scalatex-site-Styles-highlightMe" style="display: inline;padding: 0px;margin: 0px;">String</code>, while you'd prefer to
          use value objects in you domain-level code to improve type-safety
          and readability</li></ul></p>
    <p>
      Chimney uses type-level meta-programming techniques based on
      <a href="https://github.com/milessabin/shapeless">Shapeless</a> library
      and provides compact DSL on top of transformation rules derivation engine
      to transform your objects with as little boilerplate as possible
      and compile-time safety!
</p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">import io.scalaland.chimney.dsl._

val event = command.into[CoffeeMade]
  .withFieldComputed(_.at, _ =&gt; ZonedDateTime.now)
  .withFieldRenamed(_.addict, _.forAddict)
  .transform
</code></pre>
  <div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Gettingstarted" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Getting started<a class=" scalatex-site-Styles-headerLink" href="#Gettingstarted" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
    <p>
      To include Chimney to your SBT project, add following line to you <code>build.sbt</code></p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">libraryDependencies += &quot;io.scalaland&quot; %% &quot;chimney&quot; % &quot;0.1.8&quot;</code></pre>
    <p>
      Library is released for Scala 2.11 and 2.12.
      If you want to use it with Scala.js, you need to replace <code>%%</code> with <code>%%%</code>.
      Due to some <a href="https://issues.scala-lang.org/browse/SI-7046">compiler bugs</a>,
      it's recommended to use at least Scala 2.11.9 or 2.12.1.
</p>
  <div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Usage" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Usage<a class=" scalatex-site-Styles-headerLink" href="#Usage" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
    <p>
      In this section you will learn how to use Chimney example by example.
</p>
    <h1 id="Basictransformations" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Basictransformations" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Basic transformations</h1>
      <p>
        When target object contains only fields present in source object, with corresponding
        types, we can use shorthanded <code>transformInto</code>.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">case class Catterpillar(size: Int, name: String)
case class Butterfly(size: Int, name: String)

val stevie = Catterpillar(5, &quot;Steve&quot;)
val steve = stevie.transformInto[Butterfly]
// Butterfly(5, &quot;Steve&quot;)
</code></pre>
    <h1 id="Nestedtransformations" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Nestedtransformations" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Nested transformations</h1>
      <p>
        It also works when transformation needs to be recursive, possibly involving traversal
        on nested collection.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">case class Youngs(insects: List[Catterpillar])
case class Adults(insects: List[Butterfly])

val kindergarden = Youngs(List(Catterpillar(5, &quot;Steve&quot;), Catterpillar(4, &quot;Joe&quot;)))
val highschool = kindergarden.transformInto[Adults]
// Adults(List(Butterfly(5, &quot;Steve&quot;), Butterfly(4, &quot;Joe&quot;))
</code></pre>
      <p>
        We can use it as long as Chimney can recursively construct transformation for all fields
        of a target object. In this example transformer for <code class="scala scalatex-site-Styles-highlightMe" style="display: inline;padding: 0px;margin: 0px;">List</code> type is constructed
        basing on automatically derived <code class="scala scalatex-site-Styles-highlightMe" style="display: inline;padding: 0px;margin: 0px;">Catterpillar ~&gt; Butterfly</code> mapping.
</p>
    <h1 id="Providingmissingvalues" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Providingmissingvalues" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Providing missing values</h1>
      <p>
        Let's add a field to our <code class="scala scalatex-site-Styles-highlightMe" style="display: inline;padding: 0px;margin: 0px;">Butterfly</code> case class.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">case class Butterfly(size: Int, name: String, wingsColor: String)
</code></pre>
      <p>
        Now, when trying to perform the same transformation, we get compile-time error. This is
        naturally expected, as we don't have any data source for new <code>wingsColor</code> field.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">val stevie = Catterpillar(5, &quot;Steve&quot;)
val steve = stevie.transformInto[Butterfly]
// error: could not find implicit value for parameter derivedTransformer: io.scalaland.chimney.DerivedTransformer[Catterpillar,Butterfly,shapeless.HNil]
//        val steve = stevie.transformInto[Butterfly]
//                                        ^
</code></pre>
      <p>
        In this scenario, we can use Chimney syntax to provide a missing value.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">val steve = stevie.into[Butterfly]
  .withFieldConst(_.wingsColor, &quot;white&quot;)
  .transform
// Butterfly(5, &quot;Steve&quot;, &quot;white&quot;)
</code></pre>
      <p>
        We can also construct a value dynamically, by providing a function.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">val steve = stevie.into[Butterfly]
  .withFieldComputed(_.wingsColor, c =&gt; if(c.size &gt; 4) &quot;yellow&quot; else &quot;gray&quot;)
  .transform
// Butterfly(5, &quot;Steve&quot;, &quot;yellow&quot;)

</code></pre>
    <h1 id="Defaultvalues" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Defaultvalues" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Default values</h1>
      <p>
        Chimney also respects default case classes values as possible target field value source.
        When we want to rely on defaults, we don't need to provide values manually.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">case class Butterfly(size: Int, name: String, wingsColor: String = &quot;purple&quot;)

val steve = stevie.transformInto[Butterfly]
// Butterfly(5, &quot;Steve&quot;, &quot;purple&quot;)
</code></pre>
      <p>
        Providing the value anyway for such case would just ignore the default from case class.
</p>
    <h1 id="Standardtypes" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Standardtypes" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Standard types</h1>
      <p>
        Chimney supports deriving transformers for many standard Scala types, like
        <code>Options</code>, <code>Eithers</code>, collection types including <code>Lists</code>,
        <code>Vectors</code>, <code>Sets</code>, <code>Maps</code>, etc.
</p>
      <p>
        If you are interested to see how they are handled, it's recommended to explore
        <a href="https://github.com/scalalandio/chimney/blob/feature/documentation/chimney/src/test/scala/io/scalaland/chimney/DslSpec.scala">the test suite</a>.
</p>
    <h1 id="Valueclasses" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Valueclasses" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Value classes</h1>
      <p>
        As nowadays value classes tends to be relatively widely pervasive, Chimney handles
        then in a special way, supporting automatic value class field extraction and wrapping.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">object rich {
  case class PersonId(id: Int) extends AnyVal
  case class PersonName(name: String) extends AnyVal
  case class Person(personId: PersonId, personName: PersonName, age: Int)
}
object plain {
  case class Person(personId: Int, personName: String, age: Int)
}

val richPerson = rich.Person(PersonId(10), PersonName(&quot;Bill&quot;), 30)
val plainPerson = richPerson.transformInto[plain.Person]
// plain.Person(10, &quot;Bill&quot;, 30)
val richPerson2 = plainPerson.transformInto[rich.Person]
// rich.Person(PersonId(10), PersonName(&quot;Bill&quot;), 30)
</code></pre>
    <h1 id="Fieldre-labelling" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Fieldre-labelling" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Field re-labelling</h1>
      <p>
        Sometimes a field only change its name. In such case you can use <code>withFieldRenamed</code>
        operation to instruct the library about performed renaming.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">case class SpyGB(name: String, surname: String)
case class SpyRU(imya: String, familia: String)

val jamesGB = SpyGB(&quot;James&quot;, &quot;Bond&quot;)

val jamesRU = jamesGB.into[SpyRU]
    .withFieldRenamed(_.name, _.imya)
    .withFieldRenamed(_.surname, _.familia)
    .transform
// SpyRU(&quot;James&quot;, &quot;Bond&quot;)
</code></pre>
  <div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Advancedtechniques" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Advanced techniques<a class=" scalatex-site-Styles-headerLink" href="#Advancedtechniques" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>

    <h1 id="Customtransformations" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Customtransformations" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Custom transformations</h1>
      <p>
        In case the transformation is relatively complex or for some reason you just
        want o bypass Chimney derivation mechanism, you can always fall back to a simple
        function that you can plug into the Chimney transformation.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">trait Transformer[From, To] {
  def transform(src: From): To
}
</code></pre>
      <p>
        The library defines a trait <code>Transformer</code>. You can plug that transformer in
        by providing implicit instance in a local context.
</p>
      <pre><code class="scala scalatex-site-Styles-highlightMe">import io.scalaland.chimney.dsl._
import io.scalaland.chimney.Transformer

object v1 {
  case class User(id: Int, name: String, street: String, postalCode: String)
}
object v2 {
  case class Address(street: String, postalCode: String)
  case class User(id: Int, name: String, addresses: List[Address])
}

implicit val userV1toV2: Transformer[v1.User, v2.User] =
  (user: v1.User) =&gt; v2.User(
    id = user.id,
    name = user.name,
    addresses = List(v2.Address(user.street, user.postalCode))
  )

val v1Users = List(
  v1.User(1, &quot;Steve&quot;, &quot;Love street&quot;, &quot;27000&quot;),
  v1.User(2, &quot;Anna&quot;, &quot;Broadway&quot;, &quot;00321&quot;)
)

val v2Users = v1Users.transformInto[List[v2.User]]
// List(
//   v2.User(1, &quot;Steve&quot;, List(Address(&quot;Love street&quot;, &quot;27000&quot;))),
//   v2.User(2, &quot;Anna&quot;, List(Address(&quot;Broadway&quot;, &quot;00321&quot;)))
// )
</code></pre>
    <h1 id="Coproductssupport" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Coproductssupport" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Coproducts support</h1>
      <p>
        todo
</p>
    <h1 id="Patchers" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Patchers" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Patchers</h1>
      <p>
        todo
</p>
  <div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Contributing" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Contributing<a class=" scalatex-site-Styles-headerLink" href="#Contributing" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
    <p>
      todo
</p></div>
</div><script>
    scalatex.scrollspy.Controller().main(
      [{"value":"Chimney","children":[{"value":"What Chimney does","children":[]},{"value":"Getting started","children":[]},{"value":"Usage","children":[{"value":"Basic transformations","children":[]},{"value":"Nested transformations","children":[]},{"value":"Providing missing values","children":[]},{"value":"Default values","children":[]},{"value":"Standard types","children":[]},{"value":"Value classes","children":[]},{"value":"Field re-labelling","children":[]}]},{"value":"Advanced techniques","children":[{"value":"Custom transformations","children":[]},{"value":"Coproducts support","children":[]},{"value":"Patchers","children":[]}]},{"value":"Contributing","children":[]}]}]
  )</script><script>
    ['DOMContentLoaded', 'load'].forEach(function(ev){
      addEventListener(ev, function(){
        Array.prototype.forEach.call(
          document.getElementsByClassName('scalatex-site-Styles-highlightMe'),
          hljs.highlightBlock
        );
      })
    })
  </script></body></html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             